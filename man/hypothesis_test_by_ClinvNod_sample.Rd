% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hypothesis_test_by_ClinvNod_sample.R
\name{hypothesis_test_by_ClinvNod_sample}
\alias{hypothesis_test_by_ClinvNod_sample}
\title{Perform Hypothesis Testing for Nodule Progression Prediction}
\usage{
hypothesis_test_by_ClinvNod_sample(nodule_progress_detector)
}
\arguments{
\item{nodule_progress_detector}{A list containing the necessary parameters for hypothesis testing, including:
\describe{
  \item{\code{diameter_mm}}{The maximum diameter of the nodule in millimeters.}
  \item{\code{NPDS}}{The calculated Nodule Progression Detection Score (NPDS).}
  \item{\code{ClinvNod_NPDS_95th_percentiles}}{A vector of pre-defined 95th percentile thresholds for different 
  nodule size groups (e.g., <=5 mm, <=10 mm, <=15 mm, >15 mm).}
}}
}
\value{
A list containing:
\describe{
  \item{\code{NPDS}}{The calculated NPDS value.}
  \item{\code{Progression}}{A logical value indicating whether the nodule progression is predicted (\code{TRUE}) 
  or not (\code{FALSE}).}
  \item{\code{p_value}}{The p-value indicating the statistical significance of the NPDS compared to the reference 
  clinical sample distribution.}
}
}
\description{
The `hypothesis_test_by_ClinvNod_sample` function performs a hypothesis test to assess the progression likelihood 
of a nodule based on the Nodule Progression Detection Score (NPDS). It compares the calculated NPDS against 
pre-defined percentile thresholds for different nodule size groups, and evaluates its statistical significance 
using sample distributions from reference clinical data.
}
\details{
The function performs the following steps:
\enumerate{
  \item Loads the diameter, NPDS, and 95th percentile thresholds from the input list.
  \item Determines the nodule size group based on \code{diameter_mm}:
        \enumerate{
          \item Group 1: Diameter <= 5 mm.
          \item Group 2: Diameter <= 10 mm.
          \item Group 3: Diameter <= 15 mm.
          \item Group 4: Diameter > 15 mm.
        }
  \item Compares the NPDS value against the corresponding 95th percentile threshold for the determined group.
  \item Reads the reference clinical sample data for the determined group from a CSV file.
  \item Calculates the p-value as the proportion of sample NPDS values greater than the calculated NPDS.
}
}
\examples{
# Click “Run Example” and wait patiently, as it takes some time to execute.
# Alternatively, you can type the following command in the console:
# example("hypothesis_test_by_ClinvNod_sample", local = TRUE)

# Simulate a nodule_progress_detector object
nodule_progress_detector <- list(
  diameter_mm = 12,
  NPDS = 0.45,
  ClinvNod_NPDS_95th_percentiles = c(0.30, 0.35, 0.40, 0.50)
)
cat("Simulation completed. Nodule parameters initialized.\n")

# Mock the CSV file reading function for demonstration purposes
read.csv <- function(file_path, stringsAsFactors = FALSE) {
  data.frame(S = runif(100, min = 0.2, max = 0.6)) # Simulated reference sample data
}
cat("Mock function defined successfully.\n")

# Perform the hypothesis test
result <- hypothesis_test_by_ClinvNod_sample(nodule_progress_detector)
cat("Hypothesis test completed successfully.\n")

# Access and print the result with explanations
cat("Results of the hypothesis test:\n")
cat("Calculated NPDS:", result$NPDS, "\n")
cat("Progression Prediction Result:", ifelse(result$Progression, "Progression Detected", "No Progression"), "\n")
cat("Calculated p-value:", result$p_value, "\n")

# Provide interpretation of the results
if (result$p_value < 0.05) {
  cat("The result is statistically significant (p-value < 0.05).\n")
} else {
  cat("The result is not statistically significant (p-value >= 0.05).\n")
}

}
\seealso{
\code{\link{NPDS_calculate}}
}
